!function(){"use strict";function t(t){this.$el=e(t.el),this._loadOption(t,"name"),this._loadOption(t,"customVarIndex"),this._loadOption(t,"cohorts"),this._loadOption(t,"runImmediately",!0),this._loadOption(t,"defaultWeight",1),this.runImmediately&&this.run()}window.GOVUK=window.GOVUK||{};var e=window.$;t.prototype._loadOption=function(t,e,o){if(void 0!==t[e]&&(this[e]=t[e]),void 0===this[e]){if(void 0===o)throw new Error(e+" option is required for a multivariate test");this[e]=o}},t.prototype.run=function(){var t=this.getCohort();t&&(this.setCustomVar(t),this.executeCohort(t))},t.prototype.executeCohort=function(t){var e=this.cohorts[t];e.callback&&("string"==typeof e.callback?this[e.callback]():e.callback()),e.html&&(this.$el.html(e.html),this.$el.show())},t.prototype.getCohort=function(){var t=GOVUK.cookie(this.cookieName());return t&&this.cohorts[t]||(t=this.chooseRandomCohort(),GOVUK.cookie(this.cookieName(),t,{days:30})),t},t.prototype.setCustomVar=function(t){window._gaq=window._gaq||[],window._gaq.push(["_setCustomVar",this.customVarIndex,this.cookieName(),t,2]),window._gaq.push(["_trackEvent",this.cookieName(),"run","-",0,!0])},t.prototype.weightedCohortNames=function(){var t=[],o=this.defaultWeight;return e.each(this.cohorts,function(e,i){var s,n;for(s="undefined"==typeof i.weight?o:i.weight,n=0;s>n;n++)t.push(e)}),t},t.prototype.chooseRandomCohort=function(){var t=this.weightedCohortNames();return t[Math.floor(Math.random()*t.length)]},t.prototype.cookieName=function(){return"multivariatetest_cohort_"+this.name},window.GOVUK.MultivariateTest=t}(),function(){"use strict";window.GOVUK=window.GOVUK||{};var t=function(t,e){this.$el=$(t),this.$extraLinks=this.$el.find("li:not("+e+")"),this.$extraLinks.length>1&&(this.addToggleLink(),this.hideExtraLinks())};t.prototype={toggleText:function(){return this.$extraLinks.length>1?"+"+this.$extraLinks.length+" others":"+"+this.$extraLinks.length+" other"},addToggleLink:function(){this.$toggleLink=$('<a href="#">'+this.toggleText()+"</a>"),this.$toggleLink.click($.proxy(this.toggleLinks,this)),this.$toggleLink.insertAfter(this.$el)},toggleLinks:function(t){t.preventDefault(),this.$toggleLink.remove(),this.showExtraLinks()},hideExtraLinks:function(){this.$extraLinks.addClass("visuallyhidden"),$(window).trigger("govuk.pageSizeChanged")},showExtraLinks:function(){this.$extraLinks.removeClass("visuallyhidden"),$(window).trigger("govuk.pageSizeChanged")}},GOVUK.PrimaryList=t,GOVUK.primaryLinks={init:function(t){$(t).parent().each(function(e,o){new GOVUK.PrimaryList(o,t)})}}}(),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof GOVUK&&(t.GOVUK={});var o=function(t,o){this.$elms=t,this.selectedClass="selected",this.focusedClass="focused",void 0!==o&&e.each(o,function(t,e){this[t]=e}.bind(this)),this.setEventNames(),this.getSelections(),this.bindEvents()};o.prototype.setEventNames=function(){this.selectionEvents="click",this.focusEvents="focus blur"},o.prototype.markFocused=function(t,e){t.attr("id");"focused"===e?t.parent("label").addClass(this.focusedClass):t.parent("label").removeClass(this.focusedClass)},o.prototype.bindEvents=function(){var t=this.markSelected.bind(this),o=this.markFocused.bind(this);this.$elms.on(this.selectionEvents,function(o){t(e(o.target))}).on(this.focusEvents,function(t){var i="focus"===t.type?"focused":"blurred";o(e(t.target),i)})};var i=function(){o.apply(this,arguments)};i.prototype.setEventNames=function(){this.selectionEvents="click change",this.focusEvents="focus blur"},i.prototype.getSelections=function(){var t=this.markSelected.bind(this);this.selections={},e.each(this.$elms,function(o,i){var s=e(i),n=s.attr("name");"undefined"==typeof this.selections[n]&&(this.selections[n]=!1),s.is(":checked")&&t(s)}.bind(this))},i.prototype.bindEvents=function(){o.prototype.bindEvents.call(this)},i.prototype.markSelected=function(t){var e=t.attr("name"),o=this.selections[e];o&&o.parent("label").removeClass(this.selectedClass),t.parent("label").addClass(this.selectedClass),this.selections[e]=t},i.prototype.markFocused=function(){o.prototype.markFocused.apply(this,arguments)};var s=function(){o.apply(this,arguments)};s.prototype.setEventNames=function(){o.prototype.setEventNames.call(this)},s.prototype.getSelections=function(){var t=this.markSelected.bind(this);this.$elms.each(function(o,i){var s=e(i);s.is(":checked")&&t(s)})},s.prototype.bindEvents=function(){o.prototype.bindEvents.call(this)},s.prototype.markSelected=function(t){t.is(":checked")?t.parent("label").addClass(this.selectedClass):t.parent("label").removeClass(this.selectedClass)},s.prototype.markFocused=function(){o.prototype.markFocused.apply(this,arguments)},t.GOVUK.RadioButtons=i,t.GOVUK.CheckboxButtons=s;var n=function(t,e){var o=t.filter("[type=radio]"),i=t.filter("[type=checkbox]");o&&new GOVUK.RadioButtons(o,e),i&&new GOVUK.CheckboxButtons(i,e)};t.GOVUK.selectionButtons=n}.call(this),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var o={_hasScrolled:!1,_scrollTimeout:!1,init:function(){var i=e(".js-stick-at-top-when-scrolling");i.length>0&&(o.$els=i,o._scrollTimeout===!1&&(e(t).scroll(o.onScroll),o._scrollTimeout=t.setInterval(o.checkScroll,50)),e(t).resize(o.onResize)),t.GOVUK.stopScrollingAtFooter&&i.each(function(o,i){var s=e(i).find("img");if(s.length>0){var n=new Image;n.onload=function(){t.GOVUK.stopScrollingAtFooter.addEl(e(i),e(i).outerHeight())},n.src=s.attr("src")}else t.GOVUK.stopScrollingAtFooter.addEl(e(i),e(i).outerHeight())})},onScroll:function(){o._hasScrolled=!0},checkScroll:function(){if(o._hasScrolled===!0){o._hasScrolled=!1;var i=e(t).scrollTop();o.$els.each(function(s,n){var r=e(n),l=r.data("scrolled-from");l&&l>i?o.release(r):e(t).width()>768&&i>=r.offset().top&&o.stick(r)})}},stick:function(t){if(!t.hasClass("content-fixed")){t.data("scrolled-from",t.offset().top);var e=Math.max(t.height(),1);t.before('<div class="shim" style="width: '+t.width()+"px; height: "+e+'px">&nbsp;</div>'),t.css("width",t.width()+"px").addClass("content-fixed")}},release:function(t){t.hasClass("content-fixed")&&(t.data("scrolled-from",!1),t.removeClass("content-fixed").css("width",""),t.siblings(".shim").remove())}};t.GOVUK.stickAtTopWhenScrolling=o}.call(this),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var o={_pollingId:null,_isPolling:!1,_hasScrollEvt:!1,_els:[],addEl:function(i,s){var n;if(i.length){n=parseInt(i.css("top"),10),n=isNaN(n)?0:n,o.updateFooterTop(),e(t).on("govuk.pageSizeChanged",o.updateFooterTop);var r=e("<div></div>");r.insertBefore(i);var l=r.offset().top-r.position().top;r.remove();var a={$fixedEl:i,height:s+n,fixedTop:s+l,state:"fixed"};o._els.push(a),o.initTimeout()}},updateFooterTop:function(){var t=e(".js-footer:eq(0)");return 0===t.length?0:void(o.footerTop=t.offset().top-10)},initTimeout:function(){o._hasScrollEvt===!1&&(e(window).scroll(o.onScroll),o._hasScrollEvt=!0)},onScroll:function(){o._isPolling===!1&&o.startPolling()},startPolling:function(){return window.requestAnimationFrame?function(){var t=function(){o.checkScroll(),o._isPolling===!0&&o.startPolling()};o._pollingId=window.requestAnimationFrame(t),o._isPolling=!0}:function(){o._pollingId=window.setInterval(o.checkScroll,16),o._isPolling=!0}}(),stopPolling:function(){return window.requestAnimationFrame?function(){window.cancelAnimationFrame(o._pollingId),o._isPolling=!1}:function(){window.clearInterval(o._pollingId),o._isPolling=!1}}(),checkScroll:function(){var t=e(window).scrollTop();return t<o.cachedScrollTop+2&&t>o.cachedScrollTop-2?void o.stopPolling():(o.cachedScrollTop=t,void e.each(o._els,function(e,i){var s=t+i.height;s>o.footerTop?o.stick(i):o.unstick(i)}))},stick:function(t){"fixed"===t.state&&"fixed"===t.$fixedEl.css("position")&&(t.$fixedEl.css({position:"absolute",top:o.footerTop-t.fixedTop}),t.state="absolute")},unstick:function(t){"absolute"===t.state&&(t.$fixedEl.css({position:"",top:""}),t.state="fixed")}};t.GOVUK.stopScrollingAtFooter=o,e(t).load(function(){e(t).trigger("govuk.pageSizeChanged")})}.call(this);