(function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var o={_hasScrolled:!1,_scrollTimeout:!1,init:function(){var l=e(".js-stick-at-top-when-scrolling");l.length>0&&(o.$els=l,o._scrollTimeout===!1&&(e(t).scroll(o.onScroll),o._scrollTimeout=t.setInterval(o.checkScroll,50)),e(t).resize(o.onResize)),t.GOVUK.stopScrollingAtFooter&&l.each(function(o,l){var s=e(l).find("img");if(s.length>0){var i=new Image;i.onload=function(){t.GOVUK.stopScrollingAtFooter.addEl(e(l),e(l).outerHeight())},i.src=s.attr("src")}else t.GOVUK.stopScrollingAtFooter.addEl(e(l),e(l).outerHeight())})},onScroll:function(){o._hasScrolled=!0},checkScroll:function(){if(o._hasScrolled===!0){o._hasScrolled=!1;var l=e(t).scrollTop();o.$els.each(function(s,i){var c=e(i),r=c.data("scrolled-from");r&&r>l?o.release(c):e(t).width()>768&&l>=c.offset().top&&o.stick(c)})}},stick:function(t){if(!t.hasClass("content-fixed")){t.data("scrolled-from",t.offset().top);var e=Math.max(t.height(),1);t.before('<div class="shim" style="width: '+t.width()+"px; height: "+e+'px">&nbsp;</div>'),t.css("width",t.width()+"px").addClass("content-fixed")}},release:function(t){t.hasClass("content-fixed")&&(t.data("scrolled-from",!1),t.removeClass("content-fixed").css("width",""),t.siblings(".shim").remove())}};t.GOVUK.stickAtTopWhenScrolling=o}).call(this);