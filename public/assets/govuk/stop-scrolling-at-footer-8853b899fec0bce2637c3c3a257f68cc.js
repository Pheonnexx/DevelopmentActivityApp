(function(){"use strict";var o=this,i=o.jQuery;"undefined"==typeof o.GOVUK&&(o.GOVUK={});var t={_pollingId:null,_isPolling:!1,_hasScrollEvt:!1,_els:[],addEl:function(n,e){var l;if(n.length){l=parseInt(n.css("top"),10),l=isNaN(l)?0:l,t.updateFooterTop(),i(o).on("govuk.pageSizeChanged",t.updateFooterTop);var r=i("<div></div>");r.insertBefore(n);var s=r.offset().top-r.position().top;r.remove();var c={$fixedEl:n,height:e+l,fixedTop:e+s,state:"fixed"};t._els.push(c),t.initTimeout()}},updateFooterTop:function(){var o=i(".js-footer:eq(0)");return 0===o.length?0:void(t.footerTop=o.offset().top-10)},initTimeout:function(){t._hasScrollEvt===!1&&(i(window).scroll(t.onScroll),t._hasScrollEvt=!0)},onScroll:function(){t._isPolling===!1&&t.startPolling()},startPolling:function(){return window.requestAnimationFrame?function(){var o=function(){t.checkScroll(),t._isPolling===!0&&t.startPolling()};t._pollingId=window.requestAnimationFrame(o),t._isPolling=!0}:function(){t._pollingId=window.setInterval(t.checkScroll,16),t._isPolling=!0}}(),stopPolling:function(){return window.requestAnimationFrame?function(){window.cancelAnimationFrame(t._pollingId),t._isPolling=!1}:function(){window.clearInterval(t._pollingId),t._isPolling=!1}}(),checkScroll:function(){var o=i(window).scrollTop();return o<t.cachedScrollTop+2&&o>t.cachedScrollTop-2?void t.stopPolling():(t.cachedScrollTop=o,void i.each(t._els,function(i,n){var e=o+n.height;e>t.footerTop?t.stick(n):t.unstick(n)}))},stick:function(o){"fixed"===o.state&&"fixed"===o.$fixedEl.css("position")&&(o.$fixedEl.css({position:"absolute",top:t.footerTop-o.fixedTop}),o.state="absolute")},unstick:function(o){"absolute"===o.state&&(o.$fixedEl.css({position:"",top:""}),o.state="fixed")}};o.GOVUK.stopScrollingAtFooter=t,i(o).load(function(){i(o).trigger("govuk.pageSizeChanged")})}).call(this);